!function(a,b){a.SCS={version:"1.0.0"},SCS.defaults={navArr:[{title:"省",id:"scs_items_prov"},{title:"市",id:"scs_items_city"},{title:"区",id:"scs_items_dist"}],skinCss:"",onOk:function(a,b){},onCancel:function(){}},SCS.init=function(a){var a=b.extend({},SCS.defaults,a),c="",d=a.navArr;c+='<div class="cascade_scroll_selects '+a.skinCss+'" id="cascade_scroll_selects"><div class="scs_container"><div class="scs_cover"></div><div class="scs_dialog"><div class="scs_selects">',d.forEach(function(a){c+='<div class="scs_selects_group"><div class="scs_selects_group_title">'+a.title+'</div><div class="scs_selects_group_view"><div class="scs_items" data-height="240" id="'+a.id+'"></div></div></div>'}),c+='</div><div class="scs_btns"><div class="scs_btn_span"></div><div class="scs_btn scs_btn_ok">确定</div><div class="scs_btn scs_btn_cancel">取消</div></div></div></div></div>',b("#cascade_scroll_selects").remove(),b("body").append(c);var e=b("#cascade_scroll_selects");e.find(".scs_dialog").slideDown(300),e.find(".scs_cover").click(function(){e.find(".scs_dialog").slideUp(200,function(){e.remove()})}),e.find(".scs_btn_ok").click(function(){var c="",d="";b("#cascade_scroll_selects").find(".scs_selected").each(function(a){var e=b(this);0!=a?(c+="-"+e.attr("data-val"),d+=" "+e.html()):(c=e.attr("data-val"),d=e.html())}),a.onOk(c,d),e.find(".scs_dialog").slideUp(200,function(){e.remove()})}),e.find(".scs_btn_cancel").click(function(){a.onCancel(),e.find(".scs_dialog").slideUp(200,function(){e.remove()})})},SCS.destroy=function(a){"function"==typeof a&&a();var c=b("#cascade_scroll_selects");c.find(".scs_dialog").slideUp(200,function(){c.remove()})},SCS.scrollCascadeSelect=function(a){var c={el:void 0,dataArr:[],startIndex:0,onInit:function(a,b){},onChange:function(a,b){}},a=b.extend({},c,a),d=b(a.el),e=d.get(0),f=a.dataArr,g=a.startIndex,h=this,i=!1,j=!1,k=0,l=0,m=0,n=m,o=0,p=0,q=(new Date).getTime(),r=0,s=0,t=!0;try{ontouchstart}catch(u){t=!1}h.selectedIndex=g,h.getSelectedItem=function(){return f[this.selectedIndex]},t?(e.addEventListener("touchstart",function(a){k=a.changedTouches[0].pageY,o=(new Date).getTime(),m=parseInt(d.css("webkitTransform").split(",").pop().replace(" ","").replace(")","")),s=0},!1),e.addEventListener("touchmove",function(a){event.preventDefault(),s=(a.changedTouches[0].pageY-r)/((new Date).getTime()-q),l=a.changedTouches[0].pageY,n=m+l-k,d.css({"-webkit-transition":"-webkit-transform 0s ease-out","-webkit-transform":"translate3d(0, "+n+"px, 0)"}),r=l,q=(new Date).getTime()},!1),e.addEventListener("touchend",function(b){if(p=(new Date).getTime(),Math.abs(l-k)>5&&p-o>100){var c=s,e=c>0?.5*c*c/.001:-.5*c*c/.001,f=Math.abs(c)/.001;n=parseInt(d.css("webkitTransform").split(",").pop().replace(" ","").replace(")","")),n+=e;var g=n%40;Math.abs(g)>=20?n+=0>g?-1*(40+g):40-g:n-=g,n>80?n=80:n<-1*(d.attr("data-height")-120)&&(n=-1*(d.attr("data-height")-120)),d.css({"-webkit-transition":"-webkit-transform "+f/1e3+"s ease-out","-webkit-transform":"translate3d(0, "+n+"px, 0)"}),h.selectedIndex=Math.abs((n-80)/-40),d.find(".scs_item").removeClass("scs_selected").eq(h.selectedIndex).addClass("scs_selected"),a.onChange(h.getSelectedItem(),h.selectedIndex)}else j=!0;k=0,l=0,m=0,n=0,o=p=0,r=s=0},!1)):(e.onmousedown=function(a){i=!0,k=a.pageY,o=(new Date).getTime(),m=parseInt(d.css("webkitTransform").split(",").pop().replace(" ","").replace(")",""))},e.onmousemove=function(a){i&&(s=(a.pageY-r)/((new Date).getTime()-q),l=a.pageY,n=m+l-k,d.css({"-webkit-transition":"-webkit-transform 0s ease-out","-webkit-transform":"translate3d(0, "+n+"px, 0)"}),r=l,q=(new Date).getTime())},e.onmouseup=function(b){if(p=(new Date).getTime(),Math.abs(l-k)>5&&p-o>100){var c=s,e=c>0?.5*c*c/.001:-.5*c*c/.001,f=Math.abs(c)/.001;n=parseInt(d.css("webkitTransform").split(",").pop().replace(" ","").replace(")","")),n+=e;var g=n%40;Math.abs(g)>=20?n+=0>g?-1*(40+g):40-g:n-=g,n>80?n=80:n<-1*(d.attr("data-height")-120)&&(n=-1*(d.attr("data-height")-120)),d.css({"-webkit-transition":"-webkit-transform "+f/1e3+"s ease-out","-webkit-transform":"translate3d(0, "+n+"px, 0)"}),h.selectedIndex=Math.abs((n-80)/-40),d.find(".scs_item").removeClass("scs_selected").eq(h.selectedIndex).addClass("scs_selected"),a.onChange(h.getSelectedItem(),h.selectedIndex)}else j=!0;i=!1,k=0,l=0,m=0,n=0,o=p=0,r=s=0},e.onmouseleave=function(b){if(i){if(p=(new Date).getTime(),Math.abs(l-k)>5&&p-o>100){var c=s,e=c>0?.5*c*c/.001:-.5*c*c/.001,f=Math.abs(c)/.001;n=parseInt(d.css("webkitTransform").split(",").pop().replace(" ","").replace(")","")),n+=e,residue=n%40,Math.abs(residue)>=20?n+=residue<0?-1*(40+residue):40-residue:n-=residue,n>80?n=80:n<-1*(d.attr("data-height")-120)&&(n=-1*(d.attr("data-height")-120)),d.css({"-webkit-transition":"-webkit-transform "+f/1e3+"s ease-out","-webkit-transform":"translate3d(0, "+n+"px, 0)"}),h.selectedIndex=Math.abs((n-80)/-40),d.find(".scs_item").removeClass("scs_selected").eq(h.selectedIndex).addClass("scs_selected"),a.onChange(h.getSelectedItem(),h.selectedIndex)}i=!1,k=0,l=0,m=0,n=0,o=p=0,r=s=0}}),d.on("click",".scs_item",function(c){if(j){var e=b(this),f=e.position().top,g=80-f;d.css({"-webkit-transition":"-webkit-transform 0s ease-out","-webkit-transform":"translate3d(0, "+g+"px, 0)"}),d.find(".scs_item").removeClass("scs_selected"),e.addClass("scs_selected"),h.selectedIndex=Math.abs((g-80)/-40),a.onChange(h.getSelectedItem(),h.selectedIndex),havedClick=!1}}),h.render=function(a,b,c){var e="",g=b||0,i=80-40*g;return void 0==a?void d.html(e):(a.forEach(function(a,b){e+=g!=b?'<div class="scs_item" data-val="'+a.key+'">'+a.val+"</div>":'<div class="scs_item scs_selected" data-val="'+a.key+'">'+a.val+"</div>"}),d.html(e),d.attr("data-height",40*a.length),d.css("-webkit-transform","translate3d(0, "+i+"px, 0)"),d.css("transform","translate3d(0, "+i+"px, 0)"),h.selectedIndex=g,f=a,void("function"==typeof c&&c()))};var v=function(){h.render(f,g),a.onInit(h.getSelectedItem(),h.selectedIndex)};v()}}(this,jQuery);
