!function(a,b){a.SCS={version:"1.0.0"},SCS.defaults={navArr:[{title:"省",id:"scs_items_prov"},{title:"市",id:"scs_items_city"},{title:"区",id:"scs_items_dist"}],skinCss:"",onOk:function(a,b){},onCancel:function(){}},SCS.init=function(a){var a=b.extend({},SCS.defaults,a),c="",d=a.navArr;c+='<div class="cascade_scroll_selects '+a.skinCss+'" id="cascade_scroll_selects"><div class="scs_container"><div class="scs_cover"></div><div class="scs_dialog"><div class="scs_selects">',d.forEach(function(a){c+='<div class="scs_selects_group"><div class="scs_selects_group_title">'+a.title+'</div><div class="scs_selects_group_view"><div class="scs_items" data-height="240" id="'+a.id+'"></div></div></div>'}),c+='</div><div class="scs_btns"><div class="scs_btn_span"></div><div class="scs_btn scs_btn_ok">确定</div><div class="scs_btn scs_btn_cancel">取消</div></div></div></div></div>',b("#cascade_scroll_selects").remove(),b("body").append(c);var e=b("#cascade_scroll_selects");e.find(".scs_dialog").slideDown(300),e.find(".scs_cover").click(function(){e.find(".scs_dialog").slideUp(200,function(){e.remove()})}),e.find(".scs_btn_ok").click(function(){var c="",d="";b("#cascade_scroll_selects").find(".scs_selected").each(function(a){var e=b(this);0!=a?(c+="-"+e.attr("data-val"),d+=" "+e.html()):(c=e.attr("data-val"),d=e.html())}),a.onOk(c,d),e.find(".scs_dialog").slideUp(200,function(){e.remove()})}),e.find(".scs_btn_cancel").click(function(){a.onCancel(),e.find(".scs_dialog").slideUp(200,function(){e.remove()})})},SCS.destroy=function(a){"function"==typeof a&&a();var c=b("#cascade_scroll_selects");c.find(".scs_dialog").slideUp(200,function(){c.remove()})},SCS.scrollCascadeSelect=function(a){var c={el:void 0,addrArr:[],startIndex:0,onInit:function(a,b){},onChange:function(a,b){}},a=b.extend({},c,a),d=b(a.el),e=d.get(0),f={x:0,y:0},g={x:0,y:0},h={x:0,y:0},i=a.addrArr,j=a.startIndex,k=this;k.selectedIndex=j,k.getSelectedItem=function(){return i[this.selectedIndex]},e.addEventListener("touchstart",function(a){f={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY},g={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY}},!1),e.addEventListener("touchmove",function(a){a.preventDefault(),h={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY};var b=h.y-f.y,c=parseInt(d.css("webkitTransform").split(",").pop().replace(" ","").replace(")","")),e=b+c;e>80?e=80:e<-1*(d.attr("data-height")-120)&&(e=-1*(d.attr("data-height")-120)),d.css("-webkit-transform","translate3d(0, "+e+"px, 0)"),d.css("transform","translate3d(0, "+e+"px, 0)"),f={x:h.x,y:h.y}},!1),e.addEventListener("touchend",function(b){if(h={x:b.changedTouches[0].pageX,y:b.changedTouches[0].pageY},Math.abs(h.y-g.y)>5){var c=parseInt(d.css("webkitTransform").split(",").pop().replace(" ","").replace(")","")),e=c%40;Math.abs(e)>=20?c+=0>e?-1*(40+e):40-e:c-=e,d.css("-webkit-transform","translate3d(0, "+c+"px, 0)"),d.css("transform","translate3d(0, "+c+"px, 0)"),k.selectedIndex=Math.abs((c-80)/-40),d.find(".scs_item").removeClass("scs_selected").eq(k.selectedIndex).addClass("scs_selected"),f={x:0,y:0},h={x:0,y:0},a.onChange(k.getSelectedItem(),k.selectedIndex)}},!1),d.on("click",".scs_item",function(c){var e=b(this),f=e.position().top,g=80-f;d.css("-webkit-transform","translate3d(0, "+g+"px, 0)"),d.css("transform","translate3d(0, "+g+"px, 0)"),d.find(".scs_item").removeClass("scs_selected"),e.addClass("scs_selected"),k.selectedIndex=Math.abs((g-80)/-40),a.onChange(k.getSelectedItem(),k.selectedIndex)}),k.render=function(a,b,c){var e="",f=b||0,g=80-40*f;return void 0==a?void d.html(e):(a.forEach(function(a,b){e+=f!=b?'<div class="scs_item" data-val="'+a.key+'">'+a.val+"</div>":'<div class="scs_item scs_selected" data-val="'+a.key+'">'+a.val+"</div>"}),d.html(e),d.attr("data-height",40*a.length),d.css("-webkit-transform","translate3d(0, "+g+"px, 0)"),d.css("transform","translate3d(0, "+g+"px, 0)"),k.selectedIndex=f,i=a,void("function"==typeof c&&c()))};var l=function(){k.render(i,j),a.onInit(k.getSelectedItem(),k.selectedIndex)};l()}}(this,jQuery);
